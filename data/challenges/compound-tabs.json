{
  "id": "compound-tabs",
  "title": "Compound Component Pattern (Tabs)",
  "domain": "react-architecture",
  "subcategory": "design-patterns",
  "difficulty": "Senior",
  "statement": "Thiết kế một bộ component `Tabs` cho phép người dùng chuyển đổi giữa các tab. Yêu cầu sử dụng Compound Component Pattern để đảm bảo tính linh hoạt.",
  "constraints": [
    "Component phải quản lý trạng thái index đang mở (active index).",
    "Phải dễ dàng mở rộng để thêm class hoặc style riêng vào từng phần.",
    "Tránh 'Prop Drilling' từ component cha xuống các con nằm sâu bên trong."
  ],
  "complexity": "Render: O(n) với n là số lượng tab.",
  "codeLines": [
    "import React, { useState, createContext, useContext } from \"react\";",
    "",
    "const TabsContext = createContext<any>(null);",
    "",
    "export const Tabs = ({ children, defaultValue }: any) => {",
    "  const [activeIndex, setActiveIndex] = useState(defaultValue);",
    "  return (",
    "    <TabsContext.Provider value={{ activeIndex, setActiveIndex }}>",
    "      <div className=\"tabs-container\">{children}</div>",
    "    </TabsContext.Provider>",
    "  );",
    "};",
    "",
    "export const Tab = ({ index, children }: any) => {",
    "  const { activeIndex, setActiveIndex } = useContext(TabsContext);",
    "  return (",
    "    <button",
    "      onClick={() => setActiveIndex(index)}",
    "      style={{ fontWeight: activeIndex === index ? \"bold\" : \"normal\" }}",
    "    >",
    "      {children}",
    "    </button>",
    "  );",
    "};",
    "",
    "export const TabPanel = ({ index, children }: any) => {",
    "  const { activeIndex } = useContext(TabsContext);",
    "  return activeIndex === index ? <div>{children}</div> : null;",
    "};",
    "",
    "export const TabList = ({ children }: any) => <div>{children}</div>;",
    "export const TabPanels = ({ children }: any) => <div>{children}</div>;"
  ],
  "language": "tsx",
  "commonMistakes": [
    "Truyền `activeIndex` xuống từng con thông qua `React.Children.map`.",
    "Không sử dụng Context API khiến việc mở rộng cấu trúc DOM bên trong trở nên khó khăn."
  ],
  "demoComponentKey": "compound-tabs"
}
